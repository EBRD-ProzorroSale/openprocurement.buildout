[circus]
check_delay = 5
endpoint = tcp://127.0.0.1:5555
pubsub_endpoint = tcp://127.0.0.1:5556
umask = 002

httpd = True
httpd_host = localhost
httpd_port = 8080

statsd = True

[watcher:db]
cmd = couchdb
args = -a ${parts.buildout.directory}/etc/couchdb.ini
stdout_stream.class = FileStream
stdout_stream.filename = ${parts.buildout.directory}/var/log/couchdb.stdout.log
stderr_stream.class = FileStream
stderr_stream.filename = ${parts.buildout.directory}/var/log/couchdb.stderr.log

[env:db]
HOME = ${parts.buildout.directory}/var

{% if options['webapp'] %}
[watcher:webapp]
cmd = ${parts.buildout.directory}/bin/chaussette --fd $(circus.sockets.web) --backend=gevent paste:${parts.buildout.directory}/src/openprocurement.api/openprocurement.api.ini
numprocesses = 1
use_sockets = True

[socket:web]
host = 0.0.0.0
port = 6543
{% end %}